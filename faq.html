<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link type="text/css" rel="stylesheet" href="css/import.css"/>
    <title>GroovyServ @ GitHub</title>
  </head>
  <body>
    <div id="container">
      <div id="header">
        <img id="logo" src="images/logo.png" alt="GroovyServ" />
        <div id="project">
          by <a href="http://github.com/kobo">kobo</a> project
        </div>
      </div>

      <div id="nav">
        <ul>
          <li><a class="home" href="index.html">Home</a></li>
          <li><a class="document" href="document.html">Documentation</a></li>
          <li><a class="download" href="download.html">Download</a></li>
          <li><a class="source" href="http://github.com/kobo/groovyserv">Source</a></li>
        </ul>
      </div>

      <div id="content">
        <div class="section">
          <h2>FAQ</h2>
          <ul>
            <li><a href="#q1">Why does GroovyServ use JNA(Java Native Access)?</a></li>
            <li><a href="#q2">What happens if I invoke two Groovy scripts which have different current working directory at the same time?</a></li>
            <li><a href="#q3">What environments are supported?</a></li>
            <li><a href="#q4">Are there packages for MacPorts, *.deb, *.rpm?</a></li>
            <li><a href="#q5">Does GroovyServ for Windows require Cygwin?</a></li>
            <li><a href="#q6">Why is groovyclient written in C? Why isn't it written in Java?</a></li>
            <li><a href="#q7">What is the server-client communication protocol?</a></li>
            <li><a href="#q8">If the JVM process is shared by each script session, static variables are shared too?</a></li>
            <li><a href="#q9">How can I invoke the original groovy command when 'groovy' has been aliased to groovyclient?</a></li>
            <li><a href="#q10">Where is there a log file?</a></li>
            <li><a href="#q11">How can I restart or kill groovyserver?</a></li>
            <li><a href="#q12">Why is the name of this software 'GroovyServ'?</a></li>
            <li><a href="#q13">Can I use GroovyServ with Grape's @Grab annotation?</a></li>
            <li><a href="#q14">Can groovyclient connect to groovyserver running on remote server?</a></li>
            <li><a href="#q15">Can I use JQS(Java Quick Start) with GroovyServ at the same time?</a></li>
            <li><a href="#q16">I installed GroovyServ, but it doesn't work.</a></li>
            <li><a href="#q17">When I built GroovyServ by myself in Windows, some errors occured. What's required?</a></li>
            <li><a href="#q18">Why is GroovyServ's binary so sensitive to JDK version?</a></li>
          </ul>
        </div>

        <div class="section" id="q1">
          <div class="question">
            <h3>Q</h3>
            <p>Why does GroovyServ use <a href="https://jna.dev.java.net/">JNA(Java Native Access)</a>?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>Because to change current working directory.
            To be more specific, to call chdir(2) system call or _chdir win32 C runtime function.
            You might think 'user.dir' system property can be used for same purpose,
            in Pure Java way, but it is not enough because it has no effect to all of
            Java functionality about current working directory.
            For example, it has no effect to call new FileInputStream(".").</p>
          </div>
        </div>
        <div class="section" id="q2">
          <div class="question">
            <h3>Q</h3>
            <p>What happens if I invoke two Groovy scripts which have different current working directory at the same time?
            For example, using sub-shell and pipe, two Groovy scripts concurrently are invoked:</p>
            <code>$ (cd /tmp; groovyclient read.groovy ) | ( cd  /var/tmp; groovyclient output.groovy )</code>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>This is the restricted case. Exception occurs when the second groovyclient command is invoked. Instead, the following works well.</p>
            <code>$ (cd /tmp; groovyclient read.groovy ) | ( cd /tmp; groovyclient output.groovy )</code>
          </div>
        </div>
        <div class="section" id="q3">
          <div class="question">
            <h3>Q</h3>
            <p>What environments are supported?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>So far Ubuntu Linux, Windows and Mac OS X are supported.
            Basically, GroovyServ can run on the environment which supports JDK and JNA.</p>
          </div>
        </div>
        <div class="section" id="q4">
          <div class="question">
            <h3>Q</h3>
            <p>Are there packages for MacPorts, *.deb, *.rpm?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>Partially Yes! GroovyServ is now available on the MacPorts, Homebrew.
            The others may be under construction... We hope you'll do it!</p>
          </div>
        </div>
        <div class="section" id="q5">
          <div class="question">
            <h3>Q</h3>
            <p>Does GroovyServ for Windows require Cygwin?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>No, it doesn't. In GroovyServ 0.1 groovyclient.exe required cygwin.dll.
            In GroovyServ 0.2, however, we rewrote it to be able to compile with MinGW.
            So now, it doesn't require cygwin.dll and Cygwin environment at all.
            New groovyserver.bat are provided instead of groovyserver shell script.</p>
          </div>
        </div>
        <div class="section" id="q6">
          <div class="question">
            <h3>Q</h3>
            <p>Why is groovyclient written in C? Why isn't it written in Java?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>The purpose of GroovyServ is to reduce startup-time of Groovy script and quick response is the most important factor.
            So we could not use Java for groovyclient.</p>
          </div>
        </div>
        <div class="section" id="q7">
          <div class="question">
            <h3>Q</h3>
            <p>What is the server-client communication protocol?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>It is a original proprietary protocol. To know the sequence of the protocol,
            please read comments in ClientProtocols.groovy or groovyclient.rb for details.</p>
          </div>
        </div>
        <div class="section" id="q8">
          <div class="question">
            <h3>Q</h3>
            <p>If the JVM process is shared by each script session, static variables are shared too?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>Yes and No.
            If the static variables are defined in the script or Groovy classes you run,
            they are defined on a GroovyClassLoader created for each script session.
            In this case, static variables aren't shared for each script because class loaders are different.
            On the other hand, if the static variables are defined by system/bootstrap class loaders, they are shared.
            For example, the values which you stored in System.getProperties() are shared among all scripts invoked on the GroovyServ.</p>
          </div>
        </div>
        <div class="section" id="q9">
          <div class="question">
            <h3>Q</h3>
            <p>How can I invoke the original groovy command when 'groovy' has been aliased to groovyclient?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>Append the backslash as prefix like \groovy(for bash or csh). Or specify groovy command in full path.</p>
          </div>
        </div>
        <div class="section" id="q10">
          <div class="question">
            <h3>Q</h3>
            <p>Where is there a log file?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <ul>
              <li>$HOME/.groovy/groovyserver/groovyserver-&lt;port&gt;.log (Linux, Mac OS X)</li>
              <li>%USERPROFILE%/.groovy/groovyserver/groovyserver-&lt;port&gt;.log (Windows)</li>
            </ul>
          </div>
        </div>
        <div class="section" id="q11">
          <div class="question">
            <h3>Q</h3>
            <p>How can I restart or kill groovyserver?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>In Mac OS X, Linux and Cygwin environment, you can use groovyserver shell script with -r (restart) and -k (kill) options. <b>In addition, from GroovyServ 0.5, you can also use -Cr, and -Ck options with groovyclient command.</b>
            In Windows, if you invoke directly groovyserver.bat or invoke groovyclient with a transparent server invocation which uses
            groovyserver.bat, groovyserver create a new minimum window for control the server. By closing the window you can stop the groovyserver.</p>
          </div>
        </div>
        <div class="section" id="q12">
          <div class="question">
            <h3>Q</h3>
            <p>Why is the name of this software 'GroovyServ'?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>Because this is like <a href="http://www.emacswiki.org/emacs/GnuClient">"Gnuserv"</a> for Emacs. Do you know it?</p>
          </div>
        </div>
        <div class="section" id="q13">
          <div class="question">
            <h3>Q</h3>
            <p>Can I use Grape's @Grab annotation in GroovyServ?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p class="removed">
Basically, yes. But you will see OutOfMemoryError of PermGen if you use transitive dependencies. I seem that a way to resolve transitive dependencies is different of resolving direct dependencies in Groovy. ClassLoader for transitive dependencies is maybe higher than one for script. So if you use a Grape with transitive dependencies, memory of PermGen will leak and finally OutOufMemoryError will occur. As workaround, you can restart your groovyserver process, for example by "groovyserver -r" command.
            </p>
            <p>Yes you can but you might see OutOfMemoryError of PermGen if you use transitive dependencies and invoke that script repeatedly.
            It is probably comes from the way to resolve transitive dependencies is different of resolving direct dependencies in Groovy. You can avoid this error by specify SystemClassLoader to use:
              <code>@GrabConfig(systemClassLoader=true)<br />@Grab("..")</code>
            </p>
          </div>
        </div>
        <div class="section" id="q14">
          <div class="question">
            <h3>Q</h3>
            <p>Can groovyclient connect to groovyserver running on remote server?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>
            No, it can't.
            A connection from the host other than localhost is inhibited for security reasons.
            Only a client which can read a secret cookie file created by the groovyserver is allowed to connect.
            This restriction is needed because groovyserver invokes any script containing even evil code through TCP socket.</p>
          </div>
        </div>
        <div class="section" id="q15">
          <div class="question">
            <h3>Q</h3>
            <p>Can I use JQS(Java Quick Start) with GroovyServ at the same time?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>Yes, you can. No problem.</p>
          </div>
        </div>
        <div class="section" id="q16">
          <div class="question">
            <h3>Q</h3>
            <p>I installed GroovyServ, but it doesn't work.</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>I think it is caused by either reasons as follows:</p>
            <ul>
              <li>GroovyServ requires HOME/USERPROFILE, JAVA_HOME and GROOVY_HOME environment variables. Please confirm if they exists.
                  See <a href="README.html#environmentVariables">"Environment variables" in README</a>.
                </li>
              <li>An executable file we built isn't appropriate to your environment. Please build it by yourself.
                  See <a href="README.html#build">"Build from source code" in README</a>.
              </li>
              <li><p class="removed">JDK version of runtime might be different from it of build time.
              Please confirm requirements and upgrade JDK which is a specified version.
              Or rebuild it by yourself.
              See <a href="README.html#requirements">"Requirements" in README</a>.</p></li>
            </ul>
          </div>
        </div>
        <div class="section" id="q17">
          <div class="question">
            <h3>Q</h3>
            <p>When I built GroovyServ by myself in Windows, some errors occured. What's required?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p>To build it in Windows, you need Cygwin and gcc.</p>
          </div>
        </div>
        <div class="section" id="q18">
          <div class="question">
            <h3>Q</h3>
            <p>Why is GroovyServ's binary so sensitive to JDK version?</p>
          </div>
          <div class="answer">
            <h3>A</h3>
            <p class="removed">Current binary has a risk of IncompatibleClassChangeError because compiled Groovy classes has dependencies to JDK version.
            I assume that it's a bug (or specification) of Groovy, or limit for a case of using groovyc.
            Currently, it is very important to choose the appropriate binary for your environments, especially for your JDK version.
            We are trying workaround now...</p>
            <p>Since GroovyServ 0.4, Groovy scirpts aren't compiled and are packaged as a plain text file having .groovy extension into jar file.
            I hope that such a problem will not bother us again ;-)</p>
          </div>
        </div>
      </div>

      <div id="footer">
        Get the source code on GitHub : <a href="http://github.com/kobo/groovyserv">kobo/groovyserv</a>
      </div>
    </div>

    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      try {
        var pageTracker = _gat._getTracker("UA-3438563-4");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>
